# cassandra
A TUI launcher for Aphrodite .yaml files (uses the micromamba runtime).

Made with <3 by inflatebot and Google Gemini, on behalf of [Allura on HuggingFace](https://huggingface.co/allura-org)

# Rationale
The Micromamba runtime for Aphrodite is really helpful, but the first time I had to do this nonsense:
`./home/user/AI/text/aphrodite-engine/runtime.sh aphrodite run /home/asriel/AI/text/models/GGUF/lmstudio-community/Mistral-Small-24B-Instruct-2501-Q6_K.gguf --max-model-len 8192 --max-num-seqs 1 --enforce-eager --enable-chunked-prefill --tokenizer-mode mistral --tokenizer mistralai/Mistral-Small-24B-Instruct-2501`
I figured that I was at the point where .yaml configs were going to start making sense. But managing them is still a hassle, and I've been writing a lot of stub scripts and putting them in `~/.local/bin` to smooth the process of launching them, but I still had to pass arguments to Aphrodite to get it to go, so I'd still be writing a bunch by hand, and wouldn't it be nice to have a little mini-launcher to manage my Aphrodite configurations?

....So I made one.

And that's this.

# Instructions

- Ensure `whiptail` is installed (it ought to be in most distros but servers, RunPod and WSL might have to install it. I have no idea if this will work at *all* with WSL, and I'm unable to provide support for it, I'm afraid.)
- (Ideally in your .bashrc or equivalent environment script,) Export `$APHRODITE_ENGINE` to the location of your Aphrodite install. (Defaults to `$HOME/AI/text/aphrodite-engine`; will error if not found.)
- (Ideally in your .bashrc or equivalent environment script,) Export `$APHRODITE_ENGINE_CONFIGS` to the place you want to put your Aphrodite .yaml configs. (Defaults to `$HOME/.cassandra/configs`; will be created if not found.)
- Ensure `runtime.sh` exists in your Aphrodite install; this is generated by the `update_runtime.sh` script.
- Download `cassandra.sh` and run it. If no configs are found in `$APHRODITE_ENGINE_CONFIGS`, it will copy the template provided by Aphrodite. (This will launch Pythia 70M, interestingly enough.)
- Start writing some configs and putting them in `$APHRODITE_ENGINE_CONFIGS`.
- (Optional) Put Cassandra in a directory in `$PATH` (like `~/.local/bin`) so you can launch it easier.
- Exploit the power of Aphrodite Engine to its fullest.


# TODO:
- *Basic, tentative support* for non-micromamba methods of use. Barrier: Micromamba is basically the only non-Docker way of using Aphrodite on my Debian Stable (+ghosts) system at the moment; I have the wrong CUDA toolkit on my system and can't get it to compile, because Debian Bookworm's `glibc` is old and crusty and trying to splice in a new one is a *great* way to brick a Linux system.
- A flag to specify the name of an existing config and skip the TUI; moving the whole thing to a system resembling ollama modelfiles (except it doesn't suck as much. Sorry ollama, I love the *rest* of your product though)
- A config file *for `cassandra`* to use rather than environment variables, which is probably more convenient for folks without resourcified shell env scripts (which is gonna be most people). This would also make it viable to prompt for paths on first launch (since I refuse to append crap to the user's dotfiles)
- An interface to create a new config file (this is low priority because Aphrodite's sample config is so well documented that I'd imagine most people would be comfortable spinning their own in a text editor, especially at the proficiency level `cassandra` assumes. This concept could be useful for *editing* a config though, especially to test different settings non-destructively. We'll see!)
- If possible, put the dialog/server launch into a loop and trap ctrl-c so that rather than exiting the script it goes back to the menu?
- Hotkeys to control the running Aphrodite server? (I think that's as far out of scope as I want to go)
